{"version":3,"sources":["../../../../dist-tsc/schemas/main/Etheremon/index.js"],"names":["Object","defineProperty","exports","value","typed_promisify_1","require","Web3","types_1","Names","Thumbnails","EtheremonSchema","version","deploymentBlock","name","description","thumbnail","website","fields","type","assetFromFields","ID","assetToFields","asset","formatter","web3","getMonsterObjABI","getMonsterNameABI","dataContract","eth","contract","at","promisify","getMonsterObj","call","res","objId","classId","trainer","exp","createIndex","lastClaimIndex","createTime","className","getMonsterName","title","url","properties","functions","transfer","AbiType","Function","payable","constant","stateMutability","StateMutability","Nonpayable","target","inputs","kind","FunctionInputKind","Asset","Replaceable","outputs","ownerOf","View","FunctionOutputKind","Other","Owner","assetsOfOwnerByIndex","Index","assetFromOutputs","output","str","toString","events","Event","anonymous","EventInputKind","Source","indexed","Destination","assetFromInputs","hash","a"],"mappings":"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","file":"index.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst typed_promisify_1 = require(\"typed-promisify\");\nconst Web3 = require(\"web3\");\nconst types_1 = require(\"../../../types\");\nconst Names = require(\"./names.json\");\nconst Thumbnails = require(\"./thumbnails.json\");\nexports.EtheremonSchema = {\n    version: 2,\n    deploymentBlock: 4946456,\n    name: 'Etheremon',\n    description: 'Decentralized World of Ether Monsters',\n    thumbnail: 'https://cdn-images-1.medium.com/max/720/1*SvU1GenU55qO0eNNiTWGtA.png',\n    website: 'https://www.etheremon.com/',\n    fields: [\n        { name: 'ID', type: 'uint64', description: 'Etheremon ID.' },\n    ],\n    assetFromFields: (fields) => fields.ID,\n    assetToFields: asset => ({ ID: asset }),\n    formatter: async (asset, web3) => {\n        const getMonsterObjABI = { 'constant': true, 'inputs': [{ 'name': '_objId', 'type': 'uint64' }], 'name': 'getMonsterObj', 'outputs': [{ 'name': 'objId', 'type': 'uint64' }, { 'name': 'classId', 'type': 'uint32' }, { 'name': 'trainer', 'type': 'address' }, { 'name': 'exp', 'type': 'uint32' }, { 'name': 'createIndex', 'type': 'uint32' }, { 'name': 'lastClaimIndex', 'type': 'uint32' }, { 'name': 'createTime', 'type': 'uint256' }], 'payable': false, 'stateMutability': 'view', 'type': 'function' };\n        const getMonsterNameABI = { 'constant': true, 'inputs': [{ 'name': '_objId', 'type': 'uint64' }], 'name': 'getMonsterName', 'outputs': [{ 'name': 'name', 'type': 'string' }], 'payable': false, 'stateMutability': 'view', 'type': 'function' };\n        const dataContract = web3.eth.contract([getMonsterObjABI, getMonsterNameABI]).at('0xabc1c404424bdf24c19a5cc5ef8f47781d18eb3e');\n        const res = await typed_promisify_1.promisify(dataContract.getMonsterObj.call)(asset);\n        const objId = res[0];\n        const classId = res[1];\n        const trainer = res[2];\n        const exp = res[3];\n        const createIndex = res[4];\n        const lastClaimIndex = res[5];\n        const createTime = res[6];\n        const className = Names[classId];\n        const name = await typed_promisify_1.promisify(dataContract.getMonsterName.call)(asset);\n        return {\n            thumbnail: 'https://www.etheremon.com/' + Thumbnails[classId] + '.png',\n            title: 'Etheremon #' + asset + ' - ' + className,\n            description: 'Catch number: ' + createIndex + ', experience: ' + exp + ', nickname: ' + name,\n            url: 'https://www.etheremon.com/#/mons/' + classId,\n            properties: [],\n        };\n    },\n    functions: {\n        transfer: asset => ({\n            type: Web3.AbiType.Function,\n            name: 'freeTransferItem',\n            payable: false,\n            constant: false,\n            stateMutability: types_1.StateMutability.Nonpayable,\n            target: '0x4bA72F0F8DAd13709EE28a992869E79d0fE47030',\n            inputs: [\n                { kind: types_1.FunctionInputKind.Asset, name: '_objId', type: 'uint64', value: asset },\n                { kind: types_1.FunctionInputKind.Replaceable, name: '_receiver', type: 'address' },\n            ],\n            outputs: [],\n        }),\n        ownerOf: asset => ({\n            type: Web3.AbiType.Function,\n            name: 'getMonsterObj',\n            payable: false,\n            constant: true,\n            stateMutability: types_1.StateMutability.View,\n            target: '0xabc1c404424bdf24c19a5cc5ef8f47781d18eb3e',\n            inputs: [\n                { kind: types_1.FunctionInputKind.Asset, name: '_objId', type: 'uint64', value: asset },\n            ],\n            outputs: [\n                { kind: types_1.FunctionOutputKind.Other, name: 'objId', type: 'uint64' },\n                { kind: types_1.FunctionOutputKind.Other, name: 'classId', type: 'uint32' },\n                { kind: types_1.FunctionOutputKind.Owner, name: 'trainer', type: 'address' },\n                { kind: types_1.FunctionOutputKind.Other, name: 'exp', type: 'uint32' },\n                { kind: types_1.FunctionOutputKind.Other, name: 'createIndex', type: 'uint32' },\n                { kind: types_1.FunctionOutputKind.Other, name: 'lastClaimIndex', type: 'uint32' },\n                { kind: types_1.FunctionOutputKind.Other, name: 'createTime', type: 'uint' },\n            ],\n        }),\n        assetsOfOwnerByIndex: [{\n                type: Web3.AbiType.Function,\n                name: 'getMonsterObjId',\n                payable: false,\n                constant: true,\n                stateMutability: types_1.StateMutability.View,\n                target: '0xabc1c404424bdf24c19a5cc5ef8f47781d18eb3e',\n                inputs: [\n                    { kind: types_1.FunctionInputKind.Owner, name: '_trainer', type: 'address' },\n                    { kind: types_1.FunctionInputKind.Index, name: 'index', type: 'uint256' },\n                ],\n                outputs: [\n                    { kind: types_1.FunctionOutputKind.Asset, name: '', type: 'uint64' },\n                ],\n                assetFromOutputs: (output) => {\n                    const str = output.toString();\n                    if (str === '0') {\n                        return null;\n                    }\n                    else {\n                        return str;\n                    }\n                },\n            }],\n    },\n    events: {\n        transfer: [{\n                type: Web3.AbiType.Event,\n                name: 'EventFreeTransferItem',\n                target: '0x4bA72F0F8DAd13709EE28a992869E79d0fE47030',\n                anonymous: false,\n                inputs: [\n                    { kind: types_1.EventInputKind.Source, indexed: true, name: 'sender', type: 'address' },\n                    { kind: types_1.EventInputKind.Destination, indexed: true, name: 'receiver', type: 'address' },\n                    { kind: types_1.EventInputKind.Asset, indexed: false, name: 'objId', type: 'uint64' },\n                ],\n                assetFromInputs: async (inputs) => inputs.objId,\n            }],\n    },\n    hash: a => a,\n};\n//# sourceMappingURL=index.js.map"]}