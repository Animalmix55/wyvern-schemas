{"version":3,"sources":["../../../../dist-tsc/schemas/main/Mythereum/index.js"],"names":["Object","defineProperty","exports","value","typed_promisify_1","require","Web3","types_1","MythereumSchema","version","deploymentBlock","name","description","thumbnail","website","fields","type","assetFromFields","ID","assetToFields","asset","formatter","web3","cardsABI","abilitiesABI","contract","eth","at","promisify","cards","call","res","classId","classVariant","damagePoints","shieldPoints","abilityId","abilities","ares","abilityName","title","url","properties","functions","transfer","AbiType","Function","payable","constant","stateMutability","StateMutability","Nonpayable","target","inputs","kind","FunctionInputKind","Replaceable","Asset","outputs","ownerOf","View","FunctionOutputKind","Owner","assetsOfOwnerByIndex","events","Event","anonymous","EventInputKind","Source","indexed","Destination","assetFromInputs","_tokenId","hash","a"],"mappings":"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","file":"index.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst typed_promisify_1 = require(\"typed-promisify\");\nconst Web3 = require(\"web3\");\nconst types_1 = require(\"../../../types\");\nexports.MythereumSchema = {\n    version: 2,\n    deploymentBlock: 5033489,\n    name: 'Mythereum',\n    description: 'Fantastically Distributed Collectible Card Game',\n    thumbnail: 'https://www.mythereum.io/three-cards.png',\n    website: 'https://www.mythereum.io/',\n    fields: [\n        { name: 'ID', type: 'uint256', description: 'Mythereum card number.' },\n    ],\n    assetFromFields: (fields) => fields.ID,\n    assetToFields: asset => ({ ID: asset }),\n    formatter: async (asset, web3) => {\n        const cardsABI = { 'constant': true, 'inputs': [{ 'name': '', 'type': 'uint256' }], 'name': 'cards', 'outputs': [{ 'name': 'name', 'type': 'string' }, { 'name': 'class', 'type': 'uint8' }, { 'name': 'classVariant', 'type': 'uint8' }, { 'name': 'damagePoints', 'type': 'uint8' }, { 'name': 'shieldPoints', 'type': 'uint8' }, { 'name': 'abilityId', 'type': 'uint256' }], 'payable': false, 'stateMutability': 'view', 'type': 'function' };\n        const abilitiesABI = { 'constant': true, 'inputs': [{ 'name': '', 'type': 'uint256' }], 'name': 'abilities', 'outputs': [{ 'name': 'name', 'type': 'string' }, { 'name': 'canBeBlocked', 'type': 'bool' }, { 'name': 'blackMagicCost', 'type': 'uint8' }, { 'name': 'grayMagicCost', 'type': 'uint8' }, { 'name': 'whiteMagicCost', 'type': 'uint8' }, { 'name': 'addedDamage', 'type': 'uint256' }, { 'name': 'addedShield', 'type': 'uint256' }], 'payable': false, 'stateMutability': 'view', 'type': 'function' };\n        const contract = web3.eth.contract([cardsABI, abilitiesABI]).at('0xa67aac23549f4c672256b59b43ab0bacfcfcd498');\n        const res = await typed_promisify_1.promisify(contract.cards.call)(asset);\n        const name = res[0];\n        const classId = res[1];\n        const classVariant = res[2];\n        const damagePoints = res[3];\n        const shieldPoints = res[4];\n        const abilityId = res[5];\n        const ares = await typed_promisify_1.promisify(contract.abilities.call)(abilityId);\n        const abilityName = ares[0];\n        return {\n            thumbnail: 'https://www.mythereum.io/' + classId + '_' + classVariant + '.png',\n            title: 'Mythereum #' + asset + ' - ' + name,\n            description: 'Ability ' + abilityName + ' / Damage ' + damagePoints + ' / Shield ' + shieldPoints,\n            url: 'https://www.mythereum.io/',\n            properties: [],\n        };\n    },\n    functions: {\n        transfer: asset => ({\n            type: Web3.AbiType.Function,\n            name: 'transfer',\n            payable: false,\n            constant: false,\n            stateMutability: types_1.StateMutability.Nonpayable,\n            target: '0xa67aac23549f4c672256b59b43ab0bacfcfcd498',\n            inputs: [\n                { kind: types_1.FunctionInputKind.Replaceable, name: '_to', type: 'address' },\n                { kind: types_1.FunctionInputKind.Asset, name: '_tokenId', type: 'uint256', value: asset },\n            ],\n            outputs: [],\n        }),\n        ownerOf: asset => ({\n            type: Web3.AbiType.Function,\n            name: 'ownerOf',\n            payable: false,\n            constant: true,\n            stateMutability: types_1.StateMutability.View,\n            target: '0xa67aac23549f4c672256b59b43ab0bacfcfcd498',\n            inputs: [\n                { kind: types_1.FunctionInputKind.Asset, name: '_tokenId', type: 'uint256', value: asset },\n            ],\n            outputs: [\n                { kind: types_1.FunctionOutputKind.Owner, name: '', type: 'address' },\n            ],\n        }),\n        assetsOfOwnerByIndex: [],\n    },\n    events: {\n        transfer: [{\n                type: Web3.AbiType.Event,\n                name: 'Transfer',\n                target: '0xa67aac23549f4c672256b59b43ab0bacfcfcd498',\n                anonymous: false,\n                inputs: [\n                    { kind: types_1.EventInputKind.Source, indexed: true, name: '_from', type: 'address' },\n                    { kind: types_1.EventInputKind.Destination, indexed: true, name: '_to', type: 'address' },\n                    { kind: types_1.EventInputKind.Asset, indexed: false, name: '_tokenId', type: 'uint256' },\n                ],\n                assetFromInputs: async (inputs) => inputs._tokenId,\n            }],\n    },\n    hash: a => a,\n};\n//# sourceMappingURL=index.js.map"]}